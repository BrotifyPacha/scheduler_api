{% extends 'default_layout.html' %}
{% block head %}
    {{ super() }}
    <style>
        html, body {
            height: 100%;
        }
        body{
            display: flex;
            align-items: center;
            justify-content: center;
            padding-top: 40px;
            padding-bottom: 40px;
            background-color: #f8f8f8;
        }
        form {
            width: 100%;
            max-width: 380px;
            min-width: 300px;
        }
        .form-control {
            position: relative;
            font-size: 24px;
            height: auto;
        }
        .form-control:focus{
            z-index: 2;
        }
        .username {
            border-bottom-left-radius: 0px;
            border-bottom-right-radius: 0px;
        }
        .password {
            border-radius: 0px;
            margin-top: -1px;
        }
        .confirmation {
            border-top-left-radius: 0px;
            border-top-right-radius: 0px;
            margin-top: -1px;
        }
    </style>
    <script>
    $(function readyFn(){
        $('#username_input, #password_input, #confirmation_input').keyup(function buttonChecker() {
            $('#done').attr('disabled', !fieldsChecker());
        });
    });
    function fieldsChecker(){
        var username = $('#username_input').val();
        var password = $('#password_input').val();
        var confirmation = $('#confirmation_input').val();

        if (username.length < 1 || password.length < 1 || confirmation.length < 1) return false;
        if (password != confirmation) return false;

        if (username.match('[ab]+')) return false;

        return true;
    };
    </script>
{% endblock %}
{% block navbar %}{% endblock%}
{% block container %}{% endblock %}
{% block no_container %}
    <form action="" method="post">
        <h2 class="h2 mb-3">Регистрация</h2>
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category, message in messages %}
                    <div class="alert alert-{{category}}">{{message}}</div>
                {% endfor %}
            {% endif %}
        {% endwith %}
        <input class="form-control username" id="username_input" type="text" name="username" placeholder="Логин" autofocus>
        <input class="form-control password" id="password_input" type="password" name="password" placeholder="Пароль">
        <input class="form-control confirmation mb-3" id="confirmation_input" type="password" name="confirmation" placeholder="Подтверждение пароля">
        <div class="btn-group btn-block" role="group">
            <input class="btn btn-primary btn-lg" id="done" style="width: 50%" type="submit" value="Готово" disabled="true">
            <a class="btn btn-secondary btn-lg" href="{{ url_for('home') }}" style="width: 50%">Позже</a>
        </div>
        <p class="text-center mt-3 text-muted">Уже есть аккаунт? <a class="text text-lg" href="{{url_for('login')}}">Войдите</a></p>
    </form>
</body>
{% endblock %}